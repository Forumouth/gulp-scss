language: node_js

node_js:
  - '0.12'
  - '0.11'
  - '0.10'
  - iojs

before_install:
  - gem install bundler

before_script:
  - bundle install --path=./vendor/bundle

before_deploy:
  - npm run compile
  - sed -i -e "/lib\//D" .gitignore
  - git config --global user.email "test@example.com"
  - git config --global user.name "Mr. Travis CI"
  - git add .
  - git commit -m "Commit to make tarball"
  - git archive --format=tar.gz HEAD > ./${TRAVIS_TAG}-compiled.tar.gz

deploy:
  - provider: releases
    api_key:
      secure: "LmS8oTMh7J2iY9qaPK5FaH4m3Phwu6OYIHreE82eyTquzCi2rp4mb4q+diu/SdIxZAgwpJ5dAXkTN0rEvubV+2GpnVouvtekjIGInIY2d1fxV7PpVn2/1i7L4UkLFebsPlHjUHBxaj67EdBQDPZZ41ibZIARqDx/VH0CT5Byhv8U0zsJSfakjB8hWx+f85WYA55zIL/GMekAJyaLdF9yKrjgeCkHuLpF5zR3pLC5fokwLiWYji5l4ix5i0oKrn7QZGOYtAH+IsDdZwF+7u0C0bdoZ96yLBAnMofJTM28UP88poc8klwuzViwBmWsqOzP7aasJ42LfUNSMG7nPVhUgS1eaBrccQSYNNdHFZj0iSE3KuiauFwPViyH+SwFPOl5I7CkrR9iGWeVplmqkfATQMCNAIMCpGV9Anqk9z685HEdD7s4QgcuHJ/qk0jQAvebwLh67oP/OnTq5QTyO56l/h2FP9MCwLpUbkzD5yB+cvoN9WUx6aQhBY97XVXx2lyY8nZQqOe2Ysgn/ugq3baQwz0CMTPhhAS1Hac0e3RuodKv82VJ/bMM+9hp4EJIfyYL+50/NjEudNiVkJhfyeP3oleFNEb7ILweWGp0jkl3dMNdI8Whx5fT9cyBYl3Srv+v1rH27RaIRJ8lLKxg2YPgvWPdvZRo58SSSzKmjEoI/Ls="
    file: "${TRAVIS_TAG}-compiled.tar.gz"
    skip_cleanup: true
    on:
      tags: true
      repo: Forumouth/gulp-scss
  - provider: npm
    email: hiroaki@hysoftware.net
    skip_cleanup: true
    api_key:
      secure: "U1C7l97UC0M00nBnbqeDezhBfTz81ivDMge4CDY3DIj3TGhucC+vqcI5BekTgEnbWbnT4uoHQ+ZtwKPKNBk7UxmGKvQqBY1QSk5OPCETE2qyTGBwZjFvkACl8x2SFVq/zYuXRvR7NRfcOeqT9jyycui70P+FRU7hLd4GURvMNwFXs7OeSuYgWEv0DQflLdT/XgcWax1hr9NA3MiIbEVQXXGocQEBznIEBpFvuMItku5+rcEbZ2uSnzn8ILpgHwULYFnA61hwefMERXWyH9Avgwk95PHXOg0OfcUV5ZbOM5EfcWrzKaX2XNo2OBo+Zztp7fydPvK8KJ0Z9rOAkV1cxWrpcOWHHuvBDDlI1AMdWTbTfYFAQdNz8jwv1Zh368+X9rRahBYepKos22ZVEMLnlPdHESb6aZ2WP6nuV37K6I4ceX3kNYokcoFlUgVpOKnG1Rq4rTeXB2OpoGsIC6pb4aTIUfWHwPiBgEJoVW+JSnkBRZvpxONcVAQEySpuYCsaRtSlxSc5i7/rluUqEJNSi0w36TDAyz29Dk35ylTMYhmjgBJUnN6xjNfV0AmaZBRBvR9XuueXXVo2Tgx24Tgt2o/Y1f+o41dTRH589+umdV/YhdxO1xq4+5sYhO1kEWyYclHxDbJui1oJFMl7QtLrPgK72kDfznDdqSz5Tv+kwW8="
    on:
      tags: true
      repo: Forumouth/gulp-scss
